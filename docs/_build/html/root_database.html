<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Root Database Module &#8212; Smart Meeting Room Backend v1 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=d1102ebc" />
    <link rel="stylesheet" type="text/css" href="_static/basic.css?v=686e5160" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=27fed22d" />
    <script src="_static/documentation_options.js?v=5cb08e4e"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Reviews Database Helpers (reviews_service/database.py)" href="reviews_database.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="module-database">
<span id="root-database-module"></span><h1>Root Database Module<a class="headerlink" href="#module-database" title="Link to this heading">¶</a></h1>
<p>This file is for database related code for the reviews service.
Getting db connection, creating reviews table if it’s not there,
and other db related functions which will be used by app.py.</p>
<dl class="py function">
<dt class="sig sig-object py" id="database.delete_review">
<span class="sig-prename descclassname"><span class="pre">database.</span></span><span class="sig-name descname"><span class="pre">delete_review</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">review_id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#database.delete_review" title="Link to this definition">¶</a></dt>
<dd><p>Delete a review permanently.</p>
<p>Parameters
review_id : int</p>
<blockquote>
<div><p>ID of the review to remove.</p>
</div></blockquote>
<p>Returns
None</p>
<blockquote>
<div><p>The review row is removed from the database.</p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="database.flag_review">
<span class="sig-prename descclassname"><span class="pre">database.</span></span><span class="sig-name descname"><span class="pre">flag_review</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">review_id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#database.flag_review" title="Link to this definition">¶</a></dt>
<dd><p>Mark a review as flagged (moderation action).</p>
<p>Parameters
review_id : int</p>
<blockquote>
<div><p>ID of the review to flag.</p>
</div></blockquote>
<p>Returns
None</p>
<blockquote>
<div><p>Updates the ‘flagged’ field of the given review.</p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="database.get_connection">
<span class="sig-prename descclassname"><span class="pre">database.</span></span><span class="sig-name descname"><span class="pre">get_connection</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#database.get_connection" title="Link to this definition">¶</a></dt>
<dd><p>Open a connection to the unified reviews database.
It uses sqlite3.Row so columns can be accessed by name.
Foreign-key constraints are enabled for safety.</p>
<p>Returns
sqlite3.Connection</p>
<blockquote>
<div><p>An active SQLite connection with row access by column name.</p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="database.get_reviews_for_room">
<span class="sig-prename descclassname"><span class="pre">database.</span></span><span class="sig-name descname"><span class="pre">get_reviews_for_room</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">room_id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#database.get_reviews_for_room" title="Link to this definition">¶</a></dt>
<dd><p>Return all reviews for a specific room.</p>
<p>Parameters
room_id : int</p>
<blockquote>
<div><p>ID of the room for which reviews are requested.</p>
</div></blockquote>
<p>Returns
list of sqlite3.Row</p>
<blockquote>
<div><p>A list of rows containing review data for this room.</p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="database.make_reviews_table_if_missing">
<span class="sig-prename descclassname"><span class="pre">database.</span></span><span class="sig-name descname"><span class="pre">make_reviews_table_if_missing</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#database.make_reviews_table_if_missing" title="Link to this definition">¶</a></dt>
<dd><p>Create the <code class="docutils literal notranslate"><span class="pre">reviews</span></code> table if it does not already exist.</p>
<p>Takes no parameters.</p>
<p>Returns
None</p>
<blockquote>
<div><p>Simply ensures the table exists in the database.</p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="database.submit_review">
<span class="sig-prename descclassname"><span class="pre">database.</span></span><span class="sig-name descname"><span class="pre">submit_review</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">user_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">room_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rating</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">comment</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#database.submit_review" title="Link to this definition">¶</a></dt>
<dd><p>Insert a new review.</p>
<p>Parameters
user_id : int</p>
<blockquote>
<div><p>ID of the user submitting the review.</p>
</div></blockquote>
<dl class="simple">
<dt>room_id<span class="classifier">int</span></dt><dd><p>ID of the room being reviewed.</p>
</dd>
<dt>rating<span class="classifier">int</span></dt><dd><p>Rating score (0-10).</p>
</dd>
<dt>comment<span class="classifier">str</span></dt><dd><p>Free-text comment written by the user.</p>
</dd>
</dl>
<p>Returns
int</p>
<blockquote>
<div><p>The auto-generated ID of the newly created review.</p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="database.update_review">
<span class="sig-prename descclassname"><span class="pre">database.</span></span><span class="sig-name descname"><span class="pre">update_review</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">review_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rating</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">comment</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#database.update_review" title="Link to this definition">¶</a></dt>
<dd><p>Update an existing review’s rating and comment.</p>
<p>Parameters
review_id : int</p>
<blockquote>
<div><p>ID of the review to update.</p>
</div></blockquote>
<dl class="simple">
<dt>rating<span class="classifier">int</span></dt><dd><p>New rating score (0–10).</p>
</dd>
<dt>comment<span class="classifier">str</span></dt><dd><p>New free-text comment.</p>
</dd>
</dl>
<p>Returns
None</p>
<blockquote>
<div><p>The review row is updated in-place.</p>
</div></blockquote>
</dd></dl>

</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Smart Meeting Room Backend</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="users_app.html">Users Service API (users_service/app.py)</a></li>
<li class="toctree-l1"><a class="reference internal" href="users_database.html">Users Database Helpers (users_service/database.py)</a></li>
<li class="toctree-l1"><a class="reference internal" href="rooms_app.html">Rooms Service API (room_service/app.py)</a></li>
<li class="toctree-l1"><a class="reference internal" href="rooms_database.html">Rooms Database Helpers (room_service/database.py)</a></li>
<li class="toctree-l1"><a class="reference internal" href="bookings_app.html">Bookings Service API (bookings_service/app.py)</a></li>
<li class="toctree-l1"><a class="reference internal" href="bookings_database.html">Bookings Database Helpers (bookings_service/database.py)</a></li>
<li class="toctree-l1"><a class="reference internal" href="reviews_app.html">Reviews Service API (reviews_service/app.py)</a></li>
<li class="toctree-l1"><a class="reference internal" href="reviews_database.html">Reviews Database Helpers (reviews_service/database.py)</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Root Database Module</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#database.delete_review"><code class="docutils literal notranslate"><span class="pre">delete_review()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#database.flag_review"><code class="docutils literal notranslate"><span class="pre">flag_review()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#database.get_connection"><code class="docutils literal notranslate"><span class="pre">get_connection()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#database.get_reviews_for_room"><code class="docutils literal notranslate"><span class="pre">get_reviews_for_room()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#database.make_reviews_table_if_missing"><code class="docutils literal notranslate"><span class="pre">make_reviews_table_if_missing()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#database.submit_review"><code class="docutils literal notranslate"><span class="pre">submit_review()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#database.update_review"><code class="docutils literal notranslate"><span class="pre">update_review()</span></code></a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="reviews_database.html" title="previous chapter">Reviews Database Helpers (reviews_service/database.py)</a></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2025, Nour Shammaa and Riwa El Kari.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.1.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="_sources/root_database.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>